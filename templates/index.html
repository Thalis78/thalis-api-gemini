<!DOCTYPE html>
<html lang="pt-BR" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TNL² Chat - Gemini Inspired</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Google+Sans+Text:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>

  <body
    class="bg-neutral-950 text-neutral-100 font-sans flex flex-col h-screen overflow-hidden"
  >
    <div
      id="toast"
      class="fixed top-5 right-5 bg-red-600 text-white px-6 py-3 rounded-lg shadow-2xl opacity-0 pointer-events-none transition-all duration-300 z-50 text-base font-semibold"
      role="alert"
    ></div>

    <header
      class="bg-neutral-900 py-4 px-6 shadow-lg flex items-center justify-center w-full z-10 border-b border-neutral-800"
    >
      <h1 class="text-2xl font-bold tracking-wider text-white">TNL² CHAT</h1>
    </header>

    <div class="flex flex-col flex-grow bg-neutral-950 overflow-hidden">
      <main
        id="chatContainer"
        class="flex-grow overflow-y-auto p-4 sm:p-6 lg:p-8 space-y-6 sm:space-y-8"
      ></main>

      <footer class="p-4 bg-neutral-900 border-t border-neutral-800">
        <div id="imagePreviewContainer" class="px-2 pb-3 hidden">
          <div class="relative inline-block group">
            <img
              id="imagePreview"
              alt="Pré-visualização da imagem"
              class="max-w-[150px] max-h-[120px] object-cover rounded-lg border-2 border-neutral-700"
            />
            <button
              id="removeImageBtn"
              title="Remover Imagem"
              class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-200 focus:opacity-100"
              aria-label="Remover imagem anexada"
            >
              &times;
            </button>
          </div>
        </div>

        <form
          id="chatForm"
          class="flex items-end gap-3 bg-neutral-800 rounded-3xl p-3 shadow-xl ring-1 ring-neutral-700/50 mx-auto max-w-4xl"
          autocomplete="off"
        >
          <label
            for="imageInput"
            aria-label="Anexar imagem"
            class="cursor-pointer p-2 text-neutral-400 hover:text-white hover:bg-neutral-700 rounded-full transition-colors duration-200"
            title="Anexar imagem"
          >
            <svg
              class="w-6 h-6"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M14.5 4L19 8.5V20a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h5.5L14.5 4z"
              />
              <polyline points="14 2 14 8 20 8" />
              <line x1="12" y1="18" x2="12" y2="12" />
              <line x1="9" y1="15" x2="15" y2="15" />
            </svg>
          </label>
          <textarea
            id="promptInput"
            rows="1"
            placeholder="Mensagem para TNL²..."
            class="flex-grow resize-none bg-transparent py-2.5 px-3 text-neutral-200 placeholder-neutral-500 focus:outline-none text-base leading-tight max-h-48"
          ></textarea>
          <button
            type="submit"
            aria-label="Enviar mensagem"
            class="p-3 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all duration-200 disabled:bg-neutral-700 disabled:text-neutral-500 disabled:cursor-not-allowed disabled:shadow-none flex-shrink-0"
            title="Enviar"
            disabled
          >
            <svg
              class="w-6 h-6"
              viewBox="0 0 24 24"
              fill="currentColor"
              stroke="none"
            >
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
            </svg>
          </button>
        </form>
        <small
          class="text-center block text-xs text-neutral-500 mt-3 font-medium select-none tracking-wide"
        >
          Desenvolvido por
          <a
            href="https://github.com/thalissonmoura"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:underline text-neutral-400"
            >Thalisson Moura</a
          >
        </small>
      </footer>
    </div>

    <input type="file" id="imageInput" accept="image/*" class="hidden" />
    <script src="{{ url_for('static', filename='script/script.js') }}"></script>
  </body>
</html>
